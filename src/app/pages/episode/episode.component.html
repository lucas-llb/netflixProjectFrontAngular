<app-header-generic
  [logoUrl]="'/home'"
  [btnContent]="'Return to serie page'"
  [btnUrl]="`/serie/${serieId}`"
></app-header-generic>

<div *ngIf="loading">
  <app-page-spinner></app-page-spinner>
</div>

<div *ngIf="!loading && serie?.episodes">
  <p class="episode-title">{{ serie.episodes[episodeOrder].name }}</p>
  <video
    #player
    class="player"
    [src]="`${environment.backendApiUrl}/episodes/stream?videoUrl=${serie.episodes[episodeOrder].videoUrl}&token=${sessionStorage.getItem('netflix-token')}`"
    controls
    (timeupdate)="episodeTime = $event.target.currentTime"
    (loadedmetadata)="handlePlayerTime()"
  ></video>

  <div class="episode-btn-div">
    <button
      class="episode-btn"
      [disabled]="episodeOrder === 0"
      (click)="handleLastEpisode()"
    >
      <img
        src="/episode/iconArrowLeft.svg"
        alt="arrowLeft"
        class="arrow-img"
      />
    </button>
    <button
      class="episode-btn"
      [disabled]="episodeOrder + 1 === serie.episodes.length"
      (click)="handleNextEpisode()"
    >
      <img
        src="/episode/iconArrowRight.svg"
        alt="arrowRight"
        class="arrow-img"
      />
    </button>
  </div>
  <p class="text-center py-4">
    {{ serie.episodes[episodeOrder].synopsis }}
  </p>
</div>
